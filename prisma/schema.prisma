datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Cliente {
  id String @id @default(uuid())
  nomeFantasia String  @unique
  contratos Contrato[]
  representantes ClienteRepresentante[]
  oportunidades Oportunidade[]
}

model ClienteRepresentante {
  id String @id @default(uuid())
  clienteId String
  cliente Cliente @relation(fields: [clienteId], references: [id])
  nome String
  email String
  departamento String
  cargo String
  //TBD - endereco Endereco
  dataNascimento DateTime
  telefone String
  status String
  contratos Contrato[]
}

model Contrato {
  id String @id @default(uuid())
  clienteId String
  cliente Cliente @relation(fields: [clienteId], references: [id])
  titulo String
  caracteristica String
  dataInicio DateTime
  dataFimPrevista DateTime
  valor Float
  representanteId String
  representante ClienteRepresentante @relation(fields: [representanteId], references: [id])
  status String
}

model Oportunidade {
  id String @id @default(uuid())
  clienteId String
  cliente Cliente @relation(fields: [clienteId], references: [id])
  propostas Proposta[]
}

model Proposta {
  id String @id @default(uuid())
  tipo String
  versao String
  dataEnvio DateTime
  emailEnviado Boolean
  comissao Float
  oportunidadeId String
  oportunidade Oportunidade @relation(fields: [oportunidadeId], references: [id])
}